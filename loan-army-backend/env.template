# Environment Variables Template
# Copy this to .env and fill in your values

# === DATABASE CONFIGURATION ===
DB_HOST=localhost
DB_PORT=5432
DB_USER=your_db_user
DB_PASSWORD=your_db_password
DB_NAME=loan_army_db

# === API KEYS ===
# Generate using: python generate_api_key.py (DO NOT USE IN PRODUCTION)
ADMIN_API_KEY=your_secure_admin_api_key_here

# === STRIPE CONFIGURATION ===
# Get these from https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_your_key_here
STRIPE_PUBLISHABLE_KEY=pk_test_your_key_here
# Get from https://dashboard.stripe.com/webhooks (or use Stripe CLI for local dev)
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here
# Platform fee percentage (default: 10%)
STRIPE_PLATFORM_FEE_PERCENT=10

# Brave Search (MCP) API key for enriched newsletter context
# Official server runs via NPX stdio:
#   npx -y @brave/brave-search-mcp-server --transport stdio
# Requires Node 18+ (prefer 22+). Ensure BRAVE_API_KEY is set.
BRAVE_API_KEY=your_brave_api_key_here
# Set to true to enable Brave Search features (requires BRAVE_API_KEY)
ENABLE_BRAVE_SEARCH=false

# Debug/logging controls for MCP integration
MCP_DEBUG=0
MCP_LOG_SAMPLE_N=2
MCP_STRICT_FRESHNESS=1
MCP_ALLOW_WIDE_FRESHNESS=0

# === API-FOOTBALL CONFIGURATION ===
# API-Football key (optional for testing)
API_FOOTBALL_KEY=your_api_football_key_here

# API-Football connection mode
# Options: "direct" (use v3.football.api-sports.io with x-apisports-key)
#          "rapidapi" (use api-football-v1.p.rapidapi.com with x-rapidapi-* headers)
#          "stub" (use sample data only)
API_FOOTBALL_MODE=direct

# === TESTING/DEVELOPMENT ===
# Enable team filtering to reduce API costs during development
# Set to "true" to only process Manchester United (team ID 33)
# Set to "false" or leave empty for normal operation
TEST_ONLY_MANU=false
# Email address for testing email delivery (used by test scripts)
TEST_EMAIL=

# === SECURITY (OPTIONAL) ===
# Comma-separated list of IPs allowed to access admin endpoints
# Example: ADMIN_IP_WHITELIST=192.168.1.100,10.0.0.50
ADMIN_IP_WHITELIST=
# Comma-separated list of admin emails (used for previews and elevated access)
ADMIN_EMAILS=

# === FLASK CONFIGURATION ===
SECRET_KEY=your_flask_secret_key_here
FLASK_ENV=development

# === EMAIL DELIVERY (Direct via Mailgun + SMTP fallback) ===
# Primary provider: Mailgun API
# Get your API key from https://app.mailgun.com/settings/api_security
MAILGUN_API_KEY=your-mailgun-api-key
MAILGUN_DOMAIN=mg.yourdomain.com
# Use https://api.eu.mailgun.net/v3 for EU region
MAILGUN_API_URL=https://api.mailgun.net/v3

# Fallback provider: SMTP (used if Mailgun fails)
# These can also be your Mailgun SMTP credentials
SMTP_HOST=smtp.mailgun.com
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_USE_TLS=true

# Email sender defaults
EMAIL_FROM_NAME=The Academy Watch
EMAIL_FROM_ADDRESS=no-reply@theacademywatch.com
# Optional subject prefix, e.g. "[The Academy Watch]"
EMAIL_SUBJECT_PREFIX=

# Newsletter settings
# Optional: auto-send to subscribers when an admin marks a newsletter published
NEWSLETTER_AUTO_SEND_ON_APPROVAL=1
# Optional: public base URL (used to build manage/unsubscribe links)
PUBLIC_BASE_URL=
# Optional: explicit host for newsletter links (overrides other unsubscribe bases)
NEWSLETTER_LINK_BASE_URL=
# Optional: override if unsubscribe links should point to a different host
PUBLIC_UNSUBSCRIBE_BASE_URL=
# Optional: explicit API base if different from PUBLIC_BASE_URL
PUBLIC_API_BASE_URL=
# Optional: customize the relative path used for manage preference links (defaults to /manage)
PUBLIC_MANAGE_PATH=

# Legacy n8n webhook support (deprecated, will be removed)
# These are kept for backward compatibility during migration
N8N_EMAIL_WEBHOOK_URL=
N8N_EMAIL_AUTH_BEARER=

# === REDDIT API CONFIGURATION ===
# Reddit API credentials for posting newsletters to subreddits
# Create an app at https://www.reddit.com/prefs/apps (choose "script" type)
REDDIT_CLIENT_ID=your_reddit_client_id_here
REDDIT_CLIENT_SECRET=your_reddit_client_secret_here
# Reddit account credentials for the bot account (e.g., TheAcademyWatchBot)
REDDIT_USERNAME=your_reddit_bot_username
REDDIT_PASSWORD=your_reddit_bot_password
# User agent string (format: AppName/Version by /u/YourUsername)
REDDIT_USER_AGENT=TheAcademyWatch/1.0 by /u/TheAcademyWatchBot

# === PRODUCTION NOTES ===
# 1. In production, set these via your hosting platform's environment variables
# 2. Never commit the actual .env file to version control
# 3. Use strong, randomly generated keys
# 4. Consider using a secrets management service for sensitive values
